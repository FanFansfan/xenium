<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>xenium: xenium::vyukov_bounded_queue&lt; T &gt; Struct Template Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">xenium
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>xenium</b></li><li class="navelem"><a class="el" href="structxenium_1_1vyukov__bounded__queue.html">vyukov_bounded_queue</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="structxenium_1_1vyukov__bounded__queue-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">xenium::vyukov_bounded_queue&lt; T &gt; Struct Template Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>A bounded generic multi-producer/multi-consumer FIFO queue.  
 <a href="structxenium_1_1vyukov__bounded__queue.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="vyukov__bounded__queue_8hpp_source.html">vyukov_bounded_queue.hpp</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a229222a68a8eee417f09e7ed9b6e78e3"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structxenium_1_1vyukov__bounded__queue.html#a229222a68a8eee417f09e7ed9b6e78e3">vyukov_bounded_queue</a> (std::size_t size)</td></tr>
<tr class="memdesc:a229222a68a8eee417f09e7ed9b6e78e3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructs a new instance with the specified maximum size.  <a href="#a229222a68a8eee417f09e7ed9b6e78e3">More...</a><br /></td></tr>
<tr class="separator:a229222a68a8eee417f09e7ed9b6e78e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a613cfa5093e32d170d5bed089bc2217c"><td class="memTemplParams" colspan="2">template&lt;class... Args&gt; </td></tr>
<tr class="memitem:a613cfa5093e32d170d5bed089bc2217c"><td class="memTemplItemLeft" align="right" valign="top">bool&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="structxenium_1_1vyukov__bounded__queue.html#a613cfa5093e32d170d5bed089bc2217c">try_push</a> (Args &amp;&amp;...args)</td></tr>
<tr class="memdesc:a613cfa5093e32d170d5bed089bc2217c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Tries to push a new element to the queue.  <a href="#a613cfa5093e32d170d5bed089bc2217c">More...</a><br /></td></tr>
<tr class="separator:a613cfa5093e32d170d5bed089bc2217c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a23b2b6f82fb0a2ba53a58393e93d7fab"><td class="memTemplParams" colspan="2">template&lt;class... Args&gt; </td></tr>
<tr class="memitem:a23b2b6f82fb0a2ba53a58393e93d7fab"><td class="memTemplItemLeft" align="right" valign="top">bool&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="structxenium_1_1vyukov__bounded__queue.html#a23b2b6f82fb0a2ba53a58393e93d7fab">try_push_weak</a> (Args &amp;&amp;...args)</td></tr>
<tr class="memdesc:a23b2b6f82fb0a2ba53a58393e93d7fab"><td class="mdescLeft">&#160;</td><td class="mdescRight">Tries to push a new element to the queue.  <a href="#a23b2b6f82fb0a2ba53a58393e93d7fab">More...</a><br /></td></tr>
<tr class="separator:a23b2b6f82fb0a2ba53a58393e93d7fab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ade4949ef2dd3d3a4b606ee8f60ad109f"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structxenium_1_1vyukov__bounded__queue.html#ade4949ef2dd3d3a4b606ee8f60ad109f">try_pop</a> (T &amp;result)</td></tr>
<tr class="memdesc:ade4949ef2dd3d3a4b606ee8f60ad109f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Tries to pop an element from the queue as long as the queue is not empty.  <a href="#ade4949ef2dd3d3a4b606ee8f60ad109f">More...</a><br /></td></tr>
<tr class="separator:ade4949ef2dd3d3a4b606ee8f60ad109f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2210f3e5203c52943d84a9b893773ac1"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structxenium_1_1vyukov__bounded__queue.html#a2210f3e5203c52943d84a9b893773ac1">try_pop_weak</a> (T &amp;result)</td></tr>
<tr class="memdesc:a2210f3e5203c52943d84a9b893773ac1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Tries to pop an element from the queue.  <a href="#a2210f3e5203c52943d84a9b893773ac1">More...</a><br /></td></tr>
<tr class="separator:a2210f3e5203c52943d84a9b893773ac1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><h3>template&lt;typename T&gt;<br />
struct xenium::vyukov_bounded_queue&lt; T &gt;</h3>

<p>A bounded generic multi-producer/multi-consumer FIFO queue. </p>
<p>This implementation is based on the bounded MPMC queue proposed by Vyukov [<a href="index.html#ref-vyukov-2010">Vy10</a>]. It is fully generic and can handle any type <code>T</code>, as long as it is default constructible and either copyable or movable.</p>
<p>Producers and consumers operate independently, but the operations are not lock-free, i.e., a <code>try_pop</code> may have to wait for a pending <code>try_push</code> operation to finish and vice versa.</p>
<p>The <code>try_push_weak</code> and <code>try_pop_weak</code> versions are lock-free, but may fail in situations were the non-weak versions would succeed. Consider the following situation: Thread T1 and thread T2 both push to the queue. T1 starts before T2, but T2 finishes faster. Now T2 tries to pop from the queue. The queue is not empty (T2 has previously pushed an element, and there are no other pop operations involved), but T1 has still not finished its push operation. However, because T1 has started its push before T2, this is the next item to be popped. In such a situation <code>try_pop</code> would keep spinning until T1 has finished, while <code>try_pop_weak</code> would immediately return false, even though the queue is not empty.</p>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">T</td><td>type of the stored elements. </td></tr>
  </table>
  </dd>
</dl>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a229222a68a8eee417f09e7ed9b6e78e3"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structxenium_1_1vyukov__bounded__queue.html">xenium::vyukov_bounded_queue</a>&lt; T &gt;::<a class="el" href="structxenium_1_1vyukov__bounded__queue.html">vyukov_bounded_queue</a> </td>
          <td>(</td>
          <td class="paramtype">std::size_t&#160;</td>
          <td class="paramname"><em>size</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Constructs a new instance with the specified maximum size. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">size</td><td>max number of elements in the queue; must be a power of two greater one. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="ade4949ef2dd3d3a4b606ee8f60ad109f"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="structxenium_1_1vyukov__bounded__queue.html">xenium::vyukov_bounded_queue</a>&lt; T &gt;::try_pop </td>
          <td>(</td>
          <td class="paramtype">T &amp;&#160;</td>
          <td class="paramname"><em>result</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Tries to pop an element from the queue as long as the queue is not empty. </p>
<p>In case a push operation is still pending <code>try_pop</code> keeps spinning until the push has finished.</p>
<p>Progress guarantees: blocking</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">result</td><td>the value popped from the queue if the operation was successful </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code>true</code> if the operation was successful, otherwise <code>false</code> </dd></dl>

</div>
</div>
<a class="anchor" id="a2210f3e5203c52943d84a9b893773ac1"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="structxenium_1_1vyukov__bounded__queue.html">xenium::vyukov_bounded_queue</a>&lt; T &gt;::try_pop_weak </td>
          <td>(</td>
          <td class="paramtype">T &amp;&#160;</td>
          <td class="paramname"><em>result</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Tries to pop an element from the queue. </p>
<p>This operation fails if the queue is empty or a push operation on the element to be popped is still pending.</p>
<p>Progress guarantees: lock-free</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">result</td><td>the value popped from the queue if the operation was successful </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code>true</code> if the operation was successful, otherwise <code>false</code> </dd></dl>

</div>
</div>
<a class="anchor" id="a613cfa5093e32d170d5bed089bc2217c"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T &gt; </div>
<div class="memtemplate">
template&lt;class... Args&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="structxenium_1_1vyukov__bounded__queue.html">xenium::vyukov_bounded_queue</a>&lt; T &gt;::try_push </td>
          <td>(</td>
          <td class="paramtype">Args &amp;&amp;...&#160;</td>
          <td class="paramname"><em>args</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Tries to push a new element to the queue. </p>
<p>Tries to reserve a cell for the new element as long as the number of elements does not exceed the specified size.</p>
<p>If the argument is of type <code>T</code>, the element is either copy-assigned or move-assigned (depending on whether <code>Args</code> is an l-value or r-value). Otherwise, a temporary <code>T</code> instance is created using perfect-forwarding on the given arguments, which is then move-assigned.</p>
<p>Progress guarantees: blocking</p>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">Args</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">args</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code>true</code> if the operation was successful, otherwise <code>false</code> </dd></dl>

</div>
</div>
<a class="anchor" id="a23b2b6f82fb0a2ba53a58393e93d7fab"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T &gt; </div>
<div class="memtemplate">
template&lt;class... Args&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="structxenium_1_1vyukov__bounded__queue.html">xenium::vyukov_bounded_queue</a>&lt; T &gt;::try_push_weak </td>
          <td>(</td>
          <td class="paramtype">Args &amp;&amp;...&#160;</td>
          <td class="paramname"><em>args</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Tries to push a new element to the queue. </p>
<p>Tries to reserve a cell for the new element; fails if the queue is full or a pop operation on the element to be pushed to is still pending.</p>
<p>If the argument is of type <code>T</code>, the element is either copy-assigned or move-assigned (depending on whether <code>Args</code> is an l-value or r-value). Otherwise, a temporary <code>T</code> instance is created using perfect-forwarding on the given arguments, which is then move-assigned.</p>
<p>Progress guarantees: lock-free</p>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">Args</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">args</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code>true</code> if the operation was successful, otherwise <code>false</code> </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
